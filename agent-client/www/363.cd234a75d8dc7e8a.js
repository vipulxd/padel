"use strict";(self.webpackChunkagent_client=self.webpackChunkagent_client||[]).push([[363],{1363:(I,d,a)=>{a.r(d),a.d(d,{UsermapModule:()=>U});var u=a(9808),p=a(8323),t=a(5e3),l=a(5724),g=a(7053),c=a(505);function m(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"button",7),t.NdJ("click",function(){return t.CHM(i),t.oxw().requestLocationUpdate()}),t._uU(2,"START"),t.qZA()()}}function _(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"button",7),t.NdJ("click",function(){return t.CHM(i),t.oxw().requestStopLocationUpdates()}),t._uU(2," STOP "),t.qZA()()}}function h(n,o){1&n&&t._UZ(0,"div",8)}function f(n,o){1&n&&t._UZ(0,"div",9)}function v(n,o){if(1&n&&t._UZ(0,"agm-marker",10),2&n){const i=o.$implicit,e=t.oxw();t.Q6J("latitude",i.lat)("longitude",i.lng)("agmFitBounds",!0)("iconUrl",e.icon)}}function C(n,o){1&n&&t._UZ(0,"option",19)}function M(n,o){1&n&&(t.TgZ(0,"option",20),t._uU(1,"IN PROGRESS "),t.qZA())}function x(n,o){1&n&&(t.TgZ(0,"option",21),t._uU(1,"COMPLETED "),t.qZA())}function T(n,o){if(1&n){const i=t.EpF();t.TgZ(0,"select",15),t.NdJ("change",function(s){t.CHM(i);const r=t.oxw().$implicit;return t.oxw().updateStatus(r.task_id,s,r.latitude,r.longitude)}),t.YNc(1,C,1,0,"option",16),t.YNc(2,M,2,0,"option",17),t.YNc(3,x,2,0,"option",18),t._uU(4," }} "),t.qZA()}if(2&n){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","PENDING"===i.status),t.xp6(1),t.Q6J("ngIf","PENDING"==i.status||"COMPLETED"!=i.status),t.xp6(1),t.Q6J("ngIf","PENDING"!=i.status||"IN PROGRESS"==i.status)}}function S(n,o){1&n&&(t.TgZ(0,"div")(1,"b"),t._uU(2,"COMPLETED"),t.qZA()())}function k(n,o){if(1&n&&(t.TgZ(0,"agm-marker",10)(1,"agm-info-window",11)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",12),t._uU(5),t.qZA(),t.TgZ(6,"div",13),t.YNc(7,T,5,3,"select",14),t.YNc(8,S,3,0,"div",2),t.qZA()()()),2&n){const i=o.$implicit,e=t.oxw();t.Q6J("latitude",i.latitude)("longitude",i.longitude)("agmFitBounds",!0)("iconUrl",e.pickupLocationsImage),t.xp6(1),t.Q6J("disableAutoPan",!1),t.xp6(2),t.hij(" ","Subject : "+i.task_subject," "),t.xp6(2),t.hij(" ","Message : "+i.task_message," "),t.xp6(2),t.Q6J("ngIf","COMPLETED"!=i.status),t.xp6(1),t.Q6J("ngIf","COMPLETED"===i.status)}}const b=[{path:"",component:(()=>{class n{constructor(i,e){this.locationService=i,this._authservice=e,this.coords=[{lat:0,lng:0,acc:0,createdAt:""}],this.updatingLocation=!1,this.isConnected=!0,this.icon={scaledSize:{width:45,height:45},url:"./../../assets/icons/locationMarker.svg"},this.pickupLocationsImage={scaledSize:{width:40,height:40},url:"./../../assets/icons/pickup.png"}}ngOnInit(){this._authservice.isAuthenticated.subscribe(i=>{this.isAuthenticated=i,i&&this.locationService.getCurrentLocation()}),this.locationService.coordinates.subscribe(i=>{0===this.coords[0].lat&&this.coords.pop(),this.coords.push(i)}),this.locationService.getCurrentLocation(),this.updatingLocation=this.locationService.isUpdatingLocation,this.locationService.fetchPickupLocations(),this.locationService.getPickupLocation().subscribe(i=>{this.pickupLocations=i},i=>{401==i.status&&(this._authservice.show.emit(!0),this._authservice.isAuthenticated.emit(!1))}),this.locationService.isConnectedToInternet.subscribe(i=>{this.isConnected=i})}requestLocationUpdate(){this.updatingLocation=!0,this.locationService.startLocationTracking()}updateStatus(i,e,s,r){this.locationService.updateTaskStatus(i,e.target.value,s,r)}requestStopLocationUpdates(){this.updatingLocation=!1,this.locationService.stopLocationTracking()}getLocAcc(){return this.coords[this.coords.length-1].acc<10?20:this.coords[this.coords.length-1].acc<20?18:this.coords[this.coords.length-1].acc<30?16:15}ngOnDestroy(){this.locationService.stopFetchPick()}ngAfterViewInit(){this.locationService.getCurrentLocation()}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(l.a),t.Y36(g.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main"]],decls:10,vars:12,consts:[[1,"map-wrapper"],[1,"permission-btn-wrapper"],[4,"ngIf"],["class","wifi-div-connected",4,"ngIf"],["class","wifi-div-disconnected",4,"ngIf"],[3,"latitude","longitude","disableDefaultUI","zoom","usePanning","tilt"],[3,"latitude","longitude","agmFitBounds","iconUrl",4,"ngFor","ngForOf"],[1,"btn-home",3,"click"],[1,"wifi-div-connected"],[1,"wifi-div-disconnected"],[3,"latitude","longitude","agmFitBounds","iconUrl"],[3,"disableAutoPan"],[1,"message-body"],[1,"select-body"],["name","Status","id","status",3,"change",4,"ngIf"],["name","Status","id","status",3,"change"],["value","Task status",4,"ngIf"],["value","IN PROGRESS",4,"ngIf"],["value","COMPLETED",4,"ngIf"],["value","Task status"],["value","IN PROGRESS"],["value","COMPLETED"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,m,3,0,"div",2),t.YNc(3,_,3,0,"div",2),t.YNc(4,h,1,0,"div",3),t.YNc(5,f,1,0,"div",4),t.qZA(),t.TgZ(6,"agm-map",5),t._uU(7," > "),t.YNc(8,v,1,4,"agm-marker",6),t.YNc(9,k,9,9,"agm-marker",6),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngIf",!e.updatingLocation),t.xp6(1),t.Q6J("ngIf",e.updatingLocation),t.xp6(1),t.Q6J("ngIf",e.isConnected),t.xp6(1),t.Q6J("ngIf",!e.isConnected),t.xp6(1),t.Q6J("latitude",e.coords[e.coords.length-1].lat)("longitude",e.coords[e.coords.length-1].lng)("disableDefaultUI",!0)("zoom",e.getLocAcc())("usePanning",!0)("tilt",100),t.xp6(2),t.Q6J("ngForOf",e.coords),t.xp6(1),t.Q6J("ngForOf",e.pickupLocations))},directives:[u.O5,c.SA,u.sg,c.pt,c.NC,c.d],styles:["agm-map[_ngcontent-%COMP%]{height:98vh;width:100vw}.permission-btn-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:1!important;height:51px;width:100%;padding:20px;text-align:center;display:flex;justify-content:space-between}.message-body[_ngcontent-%COMP%]{width:180px}.select-body[_ngcontent-%COMP%]{padding:10px}.wifi-div-connected[_ngcontent-%COMP%]{margin-top:22px;height:30px;width:30px;border-radius:50%;background-color:green;border:1px solid black}.wifi-div-disconnected[_ngcontent-%COMP%]{margin-top:22px;height:30px;width:30px;border-radius:50%;background-color:#db7a69;border:1px solid black}"]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(b)],p.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,L,c.su]]}),n})()}}]);